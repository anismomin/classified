{"version":3,"sources":["app/accounts/components/accounts.component.ts"],"names":[],"mappings":"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","file":"app/accounts/components/accounts.component.js","sourcesContent":["import {Component, EventEmitter} from 'angular2/core'\nimport {Http, Headers, HTTP_PROVIDERS}  from 'angular2/http'\nimport {ControlGroup, FormBuilder, Validators, FORM_DIRECTIVES} from 'angular2/common'\n\nimport {AccountsService} from '../AccountsService'\nimport {ControlMessages} from '../../shared/components/control-messages.component'\nimport {ValidationService} from '../../shared/services/validationService'\n\n@Component({\n\tselector: 'signin-up',\n    templateUrl: 'app/accounts/templates/accounts.html',\n    inputs : ['signInUpModal'],\n    outputs: ['closeSignInUp', 'loginStatusEvent'],\n    providers: [AccountsService],\n    directives: [FORM_DIRECTIVES, ControlMessages]\n})\nexport class AccountsComponent {\n\n\tsignInUpModal : any;\n\tcloseSignInUp : EventEmitter<any> = new EventEmitter();\n\tloginStatusEvent: EventEmitter<any>  = new EventEmitter();\n\t\n\tlogInStatus : boolean = false;\n\tloginForm: ControlGroup;\n\tregisterForm: ControlGroup;\n\t\n\tloginResponse : string;\n\tregisterResponse: string;\n\tpostResponse: string;\n\n\tloginFormProcess: boolean = false;\n\tregisterFormProcess: boolean = false;\n\n\tconstructor(private _http: Http, private _accountsService: AccountsService, private fb: FormBuilder) {\n\t\tthis.fb = fb;\n\t\tthis.buildLoginForm();\n\t\tthis.buildRegisterForm();\t\n\t}\n\n\tbuildLoginForm() :void {\n\t\t\n\t\tthis.loginForm = this.fb.group({\n\t\t\t'loginUsername': ['', Validators.compose([Validators.required, ValidationService.startsWithNumber])],\n\t\t\t'loginPassword': ['', Validators.compose([Validators.required, ValidationService.passwordValidator])]\n\t\t});\n\t\tthis.registerFormProcess = false;\n\t}\t\n\n\tsubmitLoginData() {\n\t\tconsole.log(JSON.stringify(this.loginForm.value))\n    }\n\n\tbuildRegisterForm(): void {\n\t\tthis.registerForm = this.fb.group({\n\t\t\t'registerUsername': ['', Validators.compose([Validators.required, ValidationService.startsWithNumber]), ValidationService.usernameTaken],\n\t\t\t'registerEmail': ['', Validators.compose([Validators.required, ValidationService.emailValidator])],\n\t\t\t'registerPassword': ['', Validators.compose([Validators.required, ValidationService.passwordValidator])],\n\t\t});\n\n\t\tthis.registerFormProcess = false;\n\t}\n\n\tsubmitRegisterData() {\n\t\tconsole.log(JSON.stringify(this.registerForm.value))\n    }\n\n\t//Close Sign in Tab\n\tcloseSignInUpModal($event, value) {\n\t\tif ($event.target.classList.contains('cd-user-modal') || $event.target.classList.contains('cd-close-modal')) {\n\t\t\t//this.signInUpModal = null;\t\n\t\t\tthis.closeSignInUp.emit(value);\n            this.buildLoginForm();\n\t\t    this.buildRegisterForm();\n\t\t\treturn;\n\t\t}\n\t}\n\n\t//Sign In Tabs\n\tshowSignIn() {\n\t\tthis.signInUpModal = true;\n\t\treturn;\n\t}\t\t\n \t//Sign In Tabs\n\tshowSignUp(){\t\t\n\t\tthis.signInUpModal = false;\n\t\treturn;\n\t}\n\n\t// Make Login Http Request\n\tlogin(loginData) {\n\t\t\t\n\t\tif (this.loginForm.dirty && this.loginForm.valid) {\n\t\t\tlet logincreds = {\n\t\t\t\tusername: loginData.loginUsername,\n\t\t\t\tpassword: loginData.loginPassword\n\t\t\t};\n\n\t\t\tthis.loginFormProcess = true;\n\n\t\t\tthis._accountsService.login(logincreds)\n\t\t\t\t.subscribe(\n\t\t\t\tdata => this.loginResponse = JSON.stringify(data),\n\t\t\t\terror => this.logError(error),\n\t\t\t\t() => {\n\t\t\t\t\tthis.logInStatus = true;\n\t\t\t\t\tthis.signInUpModal = null;\n\t\t\t\t\tthis.loginStatusEvent.emit(true);\n\t\t\t\t\tthis.loginFormProcess = false;\n              //       this.buildLoginForm();\n\t\t            // this.buildRegisterForm();\n\t\t            // \n\t\t            localStorage.setItem('classified_jwt', JSON.parse(this.loginResponse).token);\n\t\t\t\t\tconsole.log(this.loginResponse);\n\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\t}\n\n\t// Make Register Http Request\n\tregister(registerData) {\n\t\t\n\t\tif (this.registerForm.dirty && this.registerForm.valid) {\n\t\t\tlet creds = {\n\t\t\t\tusername: registerData.registerUsername,\n\t\t\t\temail: registerData.registerEmail,\n\t\t\t\tpassword: registerData.registerPassword\n\t\t\t};\n\t\t\tthis.registerFormProcess = true;\n\n\t\t\tthis._accountsService.register(creds)\n\t\t\t\t.subscribe(\n\t\t\t\tdata => this.registerResponse = JSON.stringify(data),\n\t\t\t\terror => this.logError(error),\n\t\t\t\t() => {\n\t\t\t\t\tthis.logInStatus = true;\n\t\t\t\t\tthis.signInUpModal = null;\n\t\t\t\t\tthis.loginStatusEvent.emit(true);\n\t\t\t\t\tthis.registerFormProcess = false;\n\t\t\t\t\t // this.buildLoginForm();\n\t\t\t\t\t // this.buildRegisterForm();\n\t\t\t\t\tconsole.log(this.registerResponse);\n\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\t}\n\n\tlogError(error) {\n\t\tconsole.log(error);\n\t}\n\n}"],"sourceRoot":"/source/"}